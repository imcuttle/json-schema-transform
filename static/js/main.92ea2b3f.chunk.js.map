{"version":3,"sources":["index.js","App.js","App.module.scss","pages/home/index.js","pages/home/style.module.scss","utils/transform-worker.js","utils/modules.js","../ //.js$","reportWebVitals.js"],"names":["ReactDOM","render","StrictMode","document","getElementById","console","log","useLocalStorageState","key","initialValue","storeValue","React","useMemo","JSON","parse","localStorage","getItem","_","useState","v","setVal","initRef","useRef","useLayoutEffect","current","setItem","stringify","TextArea","Header","Content","Footer","CONFIG","axiosRequest","commonConfig","responseData","splitModule","prefix","suffix","App","loading","setLoading","jsonText","setJsonText","type","config","transform","setTransform","setType","urlText","setUrlText","jsText","setJsText","onSearch","useCallback","val","eval","res","status","json","axios","get","trim","responseType","withCredentials","data","error","message","description","method","toUpperCase","url","response","String","useEffect","locale","zh_CN","theme","className","css","header","logo","Item","label","wrapperCol","style","width","value","select","onChange","Object","keys","modules","map","name","Option","content","paramsEditor","onBeforeChange","editor","options","mode","smartIndent","tabSize","lint","foldGutter","gutters","title","placement","marginLeft","btns","Search","e","target","enterButton","placeholder","search","jsTextareaWrapper","destroyTooltipOnHide","autoFocus","rows","trigger","readOnly","jsTextarea","padding","body","spinning","wrapperClassName","delay","onJsonTextChange","module","exports","worker","TransformWorker","promiseWorker","PromiseWorker","window","jsonlint","defaultJsonText","defaultValue","jsonTextState","result","setResult","postMessage","then","catch","err","container","jsonEditor","lineNumbers","resultEditor","wrapperResult","size","tabBarGutter","tabPosition","defaultActiveKey","tabBarExtraContent","onClick","zip","JSZIP","forEach","file","generateAsync","saveAs","fileName","TabPane","tab","subEditor","Worker_fn","Worker","modulesRequire","require","reduce","basename","extname","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","Error","code","resolve","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB"],"mappings":"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","file":"static/js/main.92ea2b3f.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals(console.log);\n","import React from 'react'\nimport css from './App.module.scss'\nimport axios from 'axios'\nimport { Layout, Input, Select, ConfigProvider, Form, Space, Button, Tooltip, Popover, Spin, notification } from 'antd'\nimport zh_CN from 'antd/lib/locale/zh_CN'\nimport HomePage from './pages/home'\nimport modules from './utils/modules'\nimport { Controlled as CodeMirror } from 'react-codemirror2'\n\nconst useLocalStorageState = (key, initialValue) => {\n  const storeValue = React.useMemo(() => {\n    try {\n      return JSON.parse(localStorage.getItem(`localStorage_${key}`))\n    } catch (_) {}\n    return null\n  }, [])\n  const [v, setVal] = React.useState(storeValue || initialValue)\n  const initRef = React.useRef(false)\n\n  React.useLayoutEffect(() => {\n    if (!initRef.current) {\n      initRef.current = true\n      return\n    }\n    localStorage.setItem(`localStorage_${key}`, JSON.stringify(v))\n  }, [v])\n\n  return [v, setVal]\n}\n\nconst { TextArea } = Input\nconst { Header, Content, Footer } = Layout\n\nconst CONFIG = JSON.stringify(\n  {\n    axiosRequest: 'axios',\n    commonConfig: { responseData: true },\n    splitModule: true,\n    prefix: `/* eslint-disable */\\n// @ts-nocheck\\n`,\n    suffix: ''\n  },\n  null,\n  2\n)\n\nfunction App() {\n  const [loading, setLoading] = React.useState(false)\n  const [jsonText, setJsonText] = React.useState('{}')\n  const [transform, setTransform] = useLocalStorageState('transform-type', { type: 'to-swagger-axios', config: CONFIG })\n  const [type, setType] = useLocalStorageState('import-type', 'url')\n  const [urlText, setUrlText] = useLocalStorageState(\n    'import-value-url',\n    'http://tutor-test.zhenguanyu.com/tutor-cyber-corpus/swagger/v2/api-docs'\n  )\n  const [jsText, setJsText] = useLocalStorageState('import-value-js', '')\n  const onSearch = React.useCallback(\n    async (val) => {\n      setLoading(true)\n      try {\n        if (type === 'js') {\n          val = jsText\n          if (!val) {\n            return\n          }\n          const res = await eval(val)\n          if (res.status === 200) {\n            setJsonText(JSON.stringify(await res.json(), null, 2))\n          }\n        } else {\n          val = urlText\n          if (!val) {\n            return\n          }\n          const res = await axios.get(val.trim(), { responseType: 'json', withCredentials: true })\n          if (res.status === 200) {\n            setJsonText(JSON.stringify(res.data, null, 2))\n          }\n        }\n      } catch (e) {\n        notification.error({\n          message: '请求出错',\n          description: e.config\n            ? `${e.config.method?.toUpperCase()} ${e.config.url} (${e.response?.status || '-'})`\n            : String(e)\n        })\n      }\n      setLoading(false)\n    },\n    [type, urlText, jsonText]\n  )\n\n  React.useEffect(() => {\n    onSearch()\n  }, [])\n\n  const config = React.useMemo(() => {\n    try {\n      return JSON.parse(transform.config)\n    } catch (_) {}\n    return null\n  }, [transform.config])\n\n  return (\n    <ConfigProvider locale={zh_CN} theme={'light'}>\n      <Layout className={css.App} theme={'light'}>\n        <Header className={css.header}>\n          <span className={css.logo}>Transform json schema</span>\n\n          <Form.Item label={'转换类型'} wrapperCol={{ style: { width: 150 } }}>\n            <Select\n              value={transform.type}\n              className={css.select}\n              onChange={(value) => {\n                setTransform((v) => ({ ...v, type: value }))\n              }}\n            >\n              {Object.keys(modules).map((name) => (\n                <Select.Option key={name} value={name}>\n                  {name}\n                </Select.Option>\n              ))}\n            </Select>\n          </Form.Item>\n\n          <Popover\n            content={\n              <CodeMirror\n                className={css.paramsEditor}\n                value={transform.config}\n                onBeforeChange={(editor, data, value) => {\n                  setTransform((v) => ({ ...v, config: value }))\n                }}\n                options={{\n                  mode: 'application/json',\n                  theme: 'material',\n                  smartIndent: true,\n                  tabSize: 2,\n                  lint: true,\n                  foldGutter: true,\n                  gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter', 'CodeMirror-lint-markers']\n                }}\n              />\n            }\n          >\n            <Tooltip title={'设置转换配置'} placement={'right'}>\n              <Button style={{ marginLeft: 10 }}>设置</Button>\n            </Tooltip>\n          </Popover>\n\n          <div className={css.btns}>\n            <Select value={type} onChange={(v) => setType(v)}>\n              <Select.Option value={'url'}>从 URL 导入</Select.Option>\n              <Select.Option value={'js'}>从 JS 脚本 导入</Select.Option>\n            </Select>\n            {type === 'url' && (\n              <Input.Search\n                value={urlText}\n                onChange={(e) => setUrlText(e.target.value)}\n                enterButton=\"导入\"\n                placeholder={'从 URL 导入'}\n                onSearch={onSearch}\n                className={css.search}\n              />\n            )}\n            {type === 'js' && (\n              <div className={css.jsTextareaWrapper}>\n                <Popover\n                  destroyTooltipOnHide\n                  content={\n                    <TextArea\n                      autoFocus\n                      style={{ width: 400 }}\n                      rows={10}\n                      value={jsText}\n                      onChange={(e) => setJsText(e.target.value)}\n                      placeholder={'输入 JS 请求脚本，具体可以使用 Chrome Network 中的 Copy as fetch'}\n                    />\n                  }\n                  trigger={'click'}\n                >\n                  <Input.Search\n                    readOnly\n                    onSearch={onSearch}\n                    className={css.jsTextarea}\n                    value={jsText}\n                    enterButton=\"导入\"\n                    placeholder={'输入 JS 请求脚本，具体可以使用 Chrome Network 中的 Copy as fetch'}\n                  />\n                </Popover>\n              </div>\n            )}\n\n            {/*<Tooltip title={'设置'}>*/}\n            {/*  <Popover placement=\"bottomRight\" title={'设置自定义请求'} content={(*/}\n            {/*    <TextArea style={{width: 400}} rows={10}*/}\n            {/*              placeholder={'输入 JS 请求脚本，具体可以使用 Chrome Network 中的 Copy as fetch'}/>*/}\n            {/*  )} trigger=\"click\">*/}\n            {/*    <div className={css.clickable} style={{color: '#fff'}}>*/}\n            {/*      <SettingOutlined/>*/}\n            {/*    </div>*/}\n            {/*  </Popover>*/}\n            {/*</Tooltip>*/}\n          </div>\n        </Header>\n        <Content style={{ padding: '0 50px' }} className={css.body}>\n          <Spin spinning={loading} wrapperClassName={css.loading} delay={400}>\n            <HomePage type={transform.type} config={config} jsonText={jsonText} onJsonTextChange={setJsonText} />\n          </Spin>\n        </Content>\n      </Layout>\n    </ConfigProvider>\n  )\n}\n\nexport default App\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__15LM-\",\"header\":\"App_header__2L3DO\",\"search\":\"App_search__13zFb\",\"jsTextareaWrapper\":\"App_jsTextareaWrapper__25Ez6\",\"jsTextarea\":\"App_jsTextarea__2yuDh\",\"btns\":\"App_btns__15KWL\",\"loading\":\"App_loading__3Rsj5\",\"clickable\":\"App_clickable__Fqvmh\",\"logo\":\"App_logo__2qPv-\",\"body\":\"App_body__2a4FT\",\"paramsEditor\":\"App_paramsEditor__oCSss\"};","/* eslint-disable */\nimport React from 'react'\nimport useUncontrolled from '@rcp/use.uncontrolled'\nimport JSZIP from 'jszip'\nimport { saveAs } from 'file-saver'\n\nimport css from './style.module.scss'\n\nimport { Controlled as CodeMirror, UnControlled as UnControlledCodeMirror } from 'react-codemirror2'\nimport 'codemirror/lib/codemirror.css'\nimport 'codemirror/theme/material.css'\n// // 代码模式\nimport 'codemirror/mode/javascript/javascript'\n\n// 添加折叠\nimport 'codemirror/addon/fold/brace-fold.js'\nimport 'codemirror/addon/fold/comment-fold.js'\nimport 'codemirror/addon/fold/foldcode.js'\nimport 'codemirror/addon/fold/foldgutter.js'\nimport 'codemirror/addon/fold/foldgutter.css'\n\n// 括号匹配\nimport 'codemirror/addon/edit/matchbrackets.js'\n\n// 自动补全\nimport 'codemirror/addon/hint/show-hint.css'\nimport 'codemirror/addon/hint/show-hint.js'\nimport 'codemirror/addon/hint/anyword-hint.js'\n\nimport 'codemirror/addon/lint/json-lint.js'\nimport 'codemirror/addon/lint/lint.css'\nimport 'codemirror/addon/lint/lint.js'\n\nimport jsonlint from 'jsonlint-mod'\nimport PromiseWorker from 'promise-worker';\nimport TransformWorker from 'worker-loader!../../utils/transform-worker'\n\nimport { Button, notification, Tabs, Tooltip } from 'antd'\n\nconst worker = new TransformWorker();\nconst promiseWorker = new PromiseWorker(worker);\n\n// eslint-disable-next-line dot-notation\nwindow['jsonlint'] = jsonlint // 不能删除，json-lint有依赖\n\nfunction HomePage({ type = 'to-ts', config, defaultJsonText, jsonText, onJsonTextChange }: any) {\n  const [jsonTextState, setJsonText] = useUncontrolled({\n    value: jsonText,\n    onChange: onJsonTextChange,\n    defaultValue: defaultJsonText || '{}'\n  })\n  const [result, setResult] = React.useState('')\n\n  React.useEffect(() => {\n    try {\n      const json = JSON.parse(jsonTextState)\n      if (json) {\n        promiseWorker.postMessage([type, json, config]).then(function (response) {\n          setResult(response)\n        }).catch((err) => {\n          if (err) {\n            console.error(err)\n            notification.error({message: String(err)})\n          }\n        })\n      }\n    } catch (_) {\n      console.error(_)\n    }\n  }, [type, config, jsonTextState])\n\n  return (\n    <div className={css.container}>\n      <CodeMirror\n        className={css.jsonEditor}\n        value={jsonTextState}\n        onBeforeChange={(editor, data, value) => {\n          setJsonText(value)\n        }}\n        options={{\n          mode: 'application/json',\n          theme: 'material',\n          lineNumbers: true,\n          smartIndent: true,\n          tabSize: 2,\n          lint: true,\n          foldGutter: true,\n          gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter', 'CodeMirror-lint-markers']\n        }}\n      />\n\n      {typeof result === 'string' && (\n        <CodeMirror\n          className={css.resultEditor}\n          value={result}\n          onBeforeChange={(editor, data, value) => {\n            setResult(value)\n          }}\n          options={{\n            mode: 'text/typescript',\n            theme: 'material',\n            lineNumbers: true,\n            smartIndent: true,\n            tabSize: 2,\n            foldGutter: true,\n            gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter', 'CodeMirror-lint-markers']\n          }}\n        />\n      )}\n\n      {typeof result === 'object' && result && (\n        <div className={css.wrapperResult}>\n          <Tabs\n            size={'small'}\n            tabBarGutter={0}\n            tabPosition={'left'}\n            defaultActiveKey={Object.keys(result)[0]}\n            tabBarExtraContent={\n              <Tooltip title={'下载 ZIP'}>\n                <Button\n                  size={'small'}\n                  type={'primary'}\n                  onClick={() => {\n                    const zip = new JSZIP()\n                    Object.keys(result).forEach((name) => {\n                      zip.file(name, result[name])\n                    })\n\n                    zip.generateAsync({ type: 'blob' }).then(function (content) {\n                      saveAs(content, 'transform-json-schema-result.zip')\n                    })\n                  }}\n                >\n                  下载\n                </Button>\n              </Tooltip>\n            }\n          >\n            {Object.keys(result).map((fileName) => (\n              <Tabs.TabPane tab={fileName} key={fileName}>\n                <CodeMirror\n                  className={css.subEditor}\n                  value={result[fileName]}\n                  onBeforeChange={(editor, data, value) => {\n                    setResult({ ...result, [fileName]: value })\n                  }}\n                  options={{\n                    mode: 'text/typescript',\n                    theme: 'material',\n                    lineNumbers: true,\n                    smartIndent: true,\n                    tabSize: 2,\n                    foldGutter: true,\n                    gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter', 'CodeMirror-lint-markers']\n                  }}\n                />\n              </Tabs.TabPane>\n            ))}\n          </Tabs>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default HomePage\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"style_container__TPmxo\",\"jsonEditor\":\"style_jsonEditor__dG7Rz\",\"resultEditor\":\"style_resultEditor__1ZfRb\",\"wrapperResult\":\"style_wrapperResult__2yfYP\",\"subEditor\":\"style_subEditor__39vb3\"};","export default function Worker_fn() {\n  return new Worker(__webpack_public_path__ + \"static/js/transform-worker.f19e3511.worker.js\");\n}\n","import { dirname, basename, extname } from 'path'\nconst modulesRequire = require.context('null-loader!../../../src/shortcut', false, /\\.js$/)\n\nconst keys = modulesRequire.keys()\n\nconst modules = keys.reduce((modules, name) => {\n  modules[basename(name, extname(name))] = modulesRequire(name)\n  return modules\n}, {})\n\nexport default modules\n","var map = {\n\t\"./to-swagger-axios.js\": 431,\n\t\"./to-ts.js\": 432,\n\t\"./to-vm.js\": 433,\n\t\"./to-walli.js\": 434\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 430;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n"],"sourceRoot":""}