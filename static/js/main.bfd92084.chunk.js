(this.webpackJsonpwww=this.webpackJsonpwww||[]).push([[0],{154:function(e,t,a){"use strict";var r=a(63),o=r(a(0)),n=r(a(25));a(159);var u=r(a(160)),l=r(a(447));n.default.render(o.default.createElement(o.default.StrictMode,null,o.default.createElement(u.default,null)),document.getElementById("root")),(0,l.default)(console.log)},159:function(e,t,a){},160:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(63);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,__webpack_require__(161);var _configProvider=_interopRequireDefault(__webpack_require__(19));__webpack_require__(216);var _spin=_interopRequireDefault(__webpack_require__(218));__webpack_require__(227);var _popover=_interopRequireDefault(__webpack_require__(229));__webpack_require__(87);var _tooltip=_interopRequireDefault(__webpack_require__(69));__webpack_require__(88);var _button=_interopRequireDefault(__webpack_require__(89));__webpack_require__(242);var _form=_interopRequireDefault(__webpack_require__(246));__webpack_require__(329);var _select=_interopRequireDefault(__webpack_require__(333)),_objectSpread2=_interopRequireDefault(__webpack_require__(133)),_regenerator=_interopRequireDefault(__webpack_require__(343)),_asyncToGenerator2=_interopRequireDefault(__webpack_require__(344));__webpack_require__(134);var _message2=_interopRequireDefault(__webpack_require__(64));__webpack_require__(346);var _layout=_interopRequireDefault(__webpack_require__(348));__webpack_require__(360);var _input=_interopRequireDefault(__webpack_require__(362)),_slicedToArray2=_interopRequireDefault(__webpack_require__(151)),_react=_interopRequireDefault(__webpack_require__(0)),_AppModule=_interopRequireDefault(__webpack_require__(374)),_axios=_interopRequireDefault(__webpack_require__(375)),_zh_CN=_interopRequireDefault(__webpack_require__(393)),_icons=__webpack_require__(150),_isHotkey=_interopRequireDefault(__webpack_require__(397)),_home=_interopRequireDefault(__webpack_require__(398)),_modules=_interopRequireDefault(__webpack_require__(440)),_reactCodemirror=__webpack_require__(147),useLocalStorageState=function(e,t){var a=_react.default.useMemo((function(){try{return JSON.parse(localStorage.getItem("localStorage_".concat(e)))}catch(t){}return null}),[]),r=_react.default.useState(a||t),o=(0,_slicedToArray2.default)(r,2),n=o[0],u=o[1],l=_react.default.useRef(!1);return _react.default.useLayoutEffect((function(){l.current?localStorage.setItem("localStorage_".concat(e),JSON.stringify(n)):l.current=!0}),[n]),[n,u]},TextArea=_input.default.TextArea,Header=_layout.default.Header,Content=_layout.default.Content,Footer=_layout.default.Footer,CONFIG=JSON.stringify({axiosRequest:"axios",commonConfig:{responseData:!0},splitModule:!0,prefix:"/* eslint-disable */\n// @ts-nocheck\n",suffix:""},null,2);function App(){var _React$useState3=_react.default.useState(!1),_React$useState4=(0,_slicedToArray2.default)(_React$useState3,2),loading=_React$useState4[0],setLoading=_React$useState4[1],_React$useState5=_react.default.useState("{}"),_React$useState6=(0,_slicedToArray2.default)(_React$useState5,2),jsonText=_React$useState6[0],setJsonText=_React$useState6[1],_useLocalStorageState=useLocalStorageState("transform-type",{type:"to-swagger-axios",config:CONFIG}),_useLocalStorageState2=(0,_slicedToArray2.default)(_useLocalStorageState,2),transform=_useLocalStorageState2[0],setTransform=_useLocalStorageState2[1],_useLocalStorageState3=useLocalStorageState("import-type","url"),_useLocalStorageState4=(0,_slicedToArray2.default)(_useLocalStorageState3,2),type=_useLocalStorageState4[0],setType=_useLocalStorageState4[1],_useLocalStorageState5=useLocalStorageState("import-value-url","http://tutor-test.zhenguanyu.com/tutor-cyber-corpus/swagger/v2/api-docs"),_useLocalStorageState6=(0,_slicedToArray2.default)(_useLocalStorageState5,2),urlText=_useLocalStorageState6[0],setUrlText=_useLocalStorageState6[1],_useLocalStorageState7=useLocalStorageState("import-value-js",""),_useLocalStorageState8=(0,_slicedToArray2.default)(_useLocalStorageState7,2),jsText=_useLocalStorageState8[0],setJsText=_useLocalStorageState8[1];_react.default.useEffect((function(){var e=function(e){"TEXTAREA"!==e.target.tagName&&(0,_isHotkey.default)("mod+f",e)&&(e.preventDefault(),_message2.default.info("\u5efa\u8bae\u5728\u7f16\u8f91\u5668\u4e2d\u8fdb\u884c\u641c\u7d22\uff0c\u9009\u4e2d\u7f16\u8f91\u5668\uff0c\u7136\u540e\u952e\u5165\u641c\u7d22\u5feb\u6377\u952e"))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}));var onSearch=_react.default.useCallback(function(){var _ref=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee(val){var res,_res,_e$config$method,_e$response;return _regenerator.default.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(setLoading(!0),_context.prev=1,"js"!==type){_context.next=19;break}if(val=jsText,val){_context.next=6;break}return _context.abrupt("return");case 6:return _context.next=8,eval(val);case 8:if(res=_context.sent,200!==res.status){_context.next=17;break}return _context.t0=setJsonText,_context.t1=JSON,_context.next=14,res.json();case 14:_context.t2=_context.sent,_context.t3=_context.t1.stringify.call(_context.t1,_context.t2,null,2),(0,_context.t0)(_context.t3);case 17:_context.next=26;break;case 19:if(val=urlText,val){_context.next=22;break}return _context.abrupt("return");case 22:return _context.next=24,_axios.default.get(val.trim(),{responseType:"json",withCredentials:!0});case 24:_res=_context.sent,200===_res.status&&setJsonText(JSON.stringify(_res.data,null,2));case 26:_context.next=31;break;case 28:_context.prev=28,_context.t4=_context.catch(1),_message2.default.error(_context.t4.config?"".concat(null===(_e$config$method=_context.t4.config.method)||void 0===_e$config$method?void 0:_e$config$method.toUpperCase()," ").concat(_context.t4.config.url," (").concat((null===(_e$response=_context.t4.response)||void 0===_e$response?void 0:_e$response.status)||"-",")"):String(_context.t4));case 31:setLoading(!1);case 32:case"end":return _context.stop()}}),_callee,null,[[1,28]])})));return function(e){return _ref.apply(this,arguments)}}(),[type,urlText,jsonText]);_react.default.useEffect((function(){onSearch()}),[]);var config=_react.default.useMemo((function(){try{return JSON.parse(transform.config)}catch(e){}return null}),[transform.config]);return _react.default.createElement(_configProvider.default,{locale:_zh_CN.default,theme:"light"},_react.default.createElement(_layout.default,{className:_AppModule.default.App,theme:"light"},_react.default.createElement(Header,{className:_AppModule.default.header},_react.default.createElement("span",{className:_AppModule.default.logo},"Transform json schema"),_react.default.createElement(_form.default.Item,{label:"\u8f6c\u6362\u7c7b\u578b",wrapperCol:{style:{width:150}}},_react.default.createElement(_select.default,{value:transform.type,className:_AppModule.default.select,onChange:function(e){setTransform((function(t){return(0,_objectSpread2.default)((0,_objectSpread2.default)({},t),{},{type:e})}))}},Object.keys(_modules.default).map((function(e){return _react.default.createElement(_select.default.Option,{key:e,value:e},e)})))),_react.default.createElement(_popover.default,{content:_react.default.createElement(_reactCodemirror.Controlled,{className:_AppModule.default.paramsEditor,value:transform.config,onBeforeChange:function(e,t,a){setTransform((function(e){return(0,_objectSpread2.default)((0,_objectSpread2.default)({},e),{},{config:a})}))},options:{mode:"application/json",theme:"material",smartIndent:!0,tabSize:2,lint:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"]}})},_react.default.createElement(_tooltip.default,{title:"\u8bbe\u7f6e\u8f6c\u6362\u914d\u7f6e",placement:"right"},_react.default.createElement(_button.default,{style:{marginLeft:10},icon:_react.default.createElement(_icons.SettingOutlined,null)}))),_react.default.createElement("div",{className:_AppModule.default.btns},_react.default.createElement(_select.default,{value:type,onChange:function(e){return setType(e)}},_react.default.createElement(_select.default.Option,{value:"url"},"\u4ece URL \u5bfc\u5165"),_react.default.createElement(_select.default.Option,{value:"js"},"\u4ece JS \u811a\u672c \u5bfc\u5165")),"url"===type&&_react.default.createElement(_input.default.Search,{value:urlText,onChange:function(e){return setUrlText(e.target.value)},enterButton:"\u5bfc\u5165",placeholder:"\u4ece URL \u5bfc\u5165",onSearch:onSearch,className:_AppModule.default.search}),"js"===type&&_react.default.createElement("div",{className:_AppModule.default.jsTextareaWrapper},_react.default.createElement(_popover.default,{destroyTooltipOnHide:!0,content:_react.default.createElement(TextArea,{autoFocus:!0,style:{width:400},rows:10,value:jsText,onChange:function(e){return setJsText(e.target.value)},placeholder:"\u8f93\u5165 JS \u8bf7\u6c42\u811a\u672c\uff0c\u5177\u4f53\u53ef\u4ee5\u4f7f\u7528 Chrome Network \u4e2d\u7684 Copy as fetch"}),trigger:"click"},_react.default.createElement(_input.default.Search,{readOnly:!0,onSearch:onSearch,className:_AppModule.default.jsTextarea,value:jsText,enterButton:"\u5bfc\u5165",placeholder:"\u8f93\u5165 JS \u8bf7\u6c42\u811a\u672c\uff0c\u5177\u4f53\u53ef\u4ee5\u4f7f\u7528 Chrome Network \u4e2d\u7684 Copy as fetch"}))))),_react.default.createElement(Content,{style:{padding:"0 50px"},className:_AppModule.default.body},_react.default.createElement(_spin.default,{spinning:loading,wrapperClassName:_AppModule.default.loading,delay:400},_react.default.createElement(_home.default,{type:transform.type,config:config,jsonText:jsonText,onJsonTextChange:setJsonText})))))}var _default=App;exports.default=_default},374:function(e,t,a){e.exports={App:"App_App__15LM-",header:"App_header__2L3DO",search:"App_search__13zFb",jsTextareaWrapper:"App_jsTextareaWrapper__25Ez6",jsTextarea:"App_jsTextarea__2yuDh",btns:"App_btns__15KWL",loading:"App_loading__3Rsj5",clickable:"App_clickable__Fqvmh",logo:"App_logo__2qPv-",body:"App_body__2a4FT",paramsEditor:"App_paramsEditor__oCSss"}},398:function(e,t,a){"use strict";var r=a(63);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(399);var o=r(a(401)),n=r(a(95)),u=r(a(133));a(87);var l=r(a(69));a(88);var _=r(a(89)),c=r(a(96));a(134);var s=r(a(64)),i=r(a(151)),f=r(a(0)),d=r(a(454)),p=r(a(408)),m=a(415),g=a(150),S=r(a(416)),v=a(147);a(417),a(418),a(419),a(420),a(421),a(148),a(422),a(423),a(424),a(92),a(149),a(426),a(427),a(428),a(93),a(429),a(430),a(431),a(432),a(433),a(434),a(435),a(436);var x=r(a(437)),b=r(a(438)),y=new(r(a(439)).default),h=new b.default(y);window.jsonlint=x.default;var k=function(e){var t=e.type,a=void 0===t?"to-ts":t,r=e.config,x=e.defaultJsonText,b=e.jsonText,y=e.onJsonTextChange,k=(0,d.default)({value:b,onChange:y,defaultValue:x||"{}"}),w=(0,i.default)(k,2),E=w[0],q=w[1],T=f.default.useState(""),C=(0,i.default)(T,2),j=C[0],A=C[1],R=f.default.useState(!1),L=(0,i.default)(R,2),N=L[0],M=L[1];return f.default.useEffect((function(){try{var e=JSON.parse(E);e&&(M(!0),h.postMessage([a,e,r]).then((function(e){A(e)})).catch((function(e){e&&(console.error(e),s.default.error(String(e)))})).finally((function(){return M(!1)})))}catch(t){console.error(t)}}),[a,r,E]),f.default.createElement("div",{className:S.default.container},f.default.createElement(v.Controlled,{className:S.default.jsonEditor,value:E,onBeforeChange:function(e,t,a){q(a)},options:{mode:"application/json",theme:"material",lineNumbers:!0,smartIndent:!0,tabSize:2,lint:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"]}}),N&&f.default.createElement("div",{className:S.default.transfroming},f.default.createElement(g.LoadingOutlined,{style:{fontSize:20,color:"#1890ff"}})),"string"===typeof j&&f.default.createElement(v.Controlled,{className:S.default.resultEditor,value:j,onBeforeChange:function(e,t,a){A(a)},options:{mode:"text/typescript",theme:"material",lineNumbers:!0,smartIndent:!0,tabSize:2,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"]}}),"object"===(0,c.default)(j)&&j&&f.default.createElement("div",{className:S.default.wrapperResult},f.default.createElement(o.default,{size:"small",tabBarGutter:0,tabPosition:"left",defaultActiveKey:Object.keys(j)[0],tabBarExtraContent:f.default.createElement(l.default,{title:"\u4e0b\u8f7d ZIP"},f.default.createElement(_.default,{size:"small",type:"primary",onClick:function(){var e=new p.default;Object.keys(j).forEach((function(t){e.file(t,j[t])})),e.generateAsync({type:"blob"}).then((function(e){(0,m.saveAs)(e,"transform-json-schema-result.zip")}))}},"\u4e0b\u8f7d"))},Object.keys(j).map((function(e){return f.default.createElement(o.default.TabPane,{tab:e,key:e},f.default.createElement(v.Controlled,{className:S.default.subEditor,value:j[e],onBeforeChange:function(t,a,r){A((0,u.default)((0,u.default)({},j),{},(0,n.default)({},e,r)))},options:{mode:"text/typescript",theme:"material",lineNumbers:!0,smartIndent:!0,tabSize:2,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"]}}))})))))};t.default=k},416:function(e,t,a){e.exports={container:"style_container__TPmxo",transfroming:"style_transfroming__umP0B",jsonEditor:"style_jsonEditor__dG7Rz",resultEditor:"style_resultEditor__1ZfRb",wrapperResult:"style_wrapperResult__2yfYP",subEditor:"style_subEditor__39vb3"}},439:function(e,t,a){"use strict";function r(){return new Worker(a.p+"static/js/transform-worker.572166f8.worker.js")}a.r(t),a.d(t,"default",(function(){return r}))},440:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(441),o=a(442),n=o.keys().reduce((function(e,t){return e[(0,r.basename)(t,(0,r.extname)(t))]=o(t),e}),{});t.default=n},442:function(e,t,a){var r={"./to-swagger-axios.js":443,"./to-ts.js":444,"./to-vm.js":445,"./to-walli.js":446};function o(e){var t=n(e);return a(t)}function n(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=n,e.exports=o,o.id=442},443:function(e,t){},444:function(e,t){},445:function(e,t){},446:function(e,t){},447:function(e,t,a){"use strict";var r=a(63);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(a(448)),n=function(e){e&&e instanceof Function&&Promise.resolve().then((function(){return(0,o.default)(a(449))})).then((function(t){var a=t.getCLS,r=t.getFID,o=t.getFCP,n=t.getLCP,u=t.getTTFB;a(e),r(e),o(e),n(e),u(e)}))};t.default=n}},[[154,1,2]]]);
//# sourceMappingURL=main.bfd92084.chunk.js.map